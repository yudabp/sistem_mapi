<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Data Penjualan - PT API APPS</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; margin: 0; background: #f5f7fa; }
    header { background: linear-gradient(90deg, #c62828, #e53935); color: white; padding: 20px; text-align: center; font-size: 22px; font-weight: bold; letter-spacing: 1px; box-shadow: 0 3px 6px rgba(0,0,0,0.2); }
    .container { padding: 20px; max-width: 1100px; margin: auto; }

    /* CARD BOX */
    .card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 3px 8px rgba(0,0,0,0.1); margin-bottom: 20px; }
    .card h3 { margin-top: 0; color: #c62828; }

    /* FORM */
    form label { display: block; margin-top: 10px; font-weight: bold; }
    form input, form select { width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 8px; }
    form button { margin-top: 15px; padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; }
    .btn-save { background: #2e7d32; color: white; }
    .btn-clear { background: #e53935; color: white; margin-left: 10px; }
    .readonly { background: #f0f0f0; }

    /* FILTER */
    .filter-box { margin: 20px 0; display: flex; gap: 10px; flex-wrap: wrap; }
    .filter-box input, .filter-box select { padding: 10px; border-radius: 8px; border: 1px solid #bbb; }

    /* EXPORT */
    .export-btns { margin: 15px 0; }
    .export-btns button { padding: 10px 16px; border: none; border-radius: 8px; margin-right: 10px; cursor: pointer; font-weight: bold; }
    .btn-excel { background: #43a047; color: white; }
    .btn-pdf { background: #e53935; color: white; }

    /* TABLE */
    table { width: 100%; border-collapse: collapse; background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 3px 8px rgba(0,0,0,0.05); }
    table th, table td { border: 1px solid #eee; padding: 12px; text-align: center; font-size: 14px; }
    table th { background: #1e88e5; color: white; font-size: 15px; }

    /* SUMMARY BOX */
    .summary { display: flex; justify-content: space-around; gap: 20px; margin: 20px 0; }
    .summary .box { flex: 1; background: white; padding: 20px; border-radius: 12px; text-align: center; box-shadow: 0 3px 8px rgba(0,0,0,0.1); }
    .summary h2 { margin: 0; color: #1e88e5; }
    .summary p { margin: 5px 0 0; font-weight: bold; color: #555; }
  </style>
</head>
<body>
  <header>üí∞ PT API APPS ‚Äì Data Penjualan</header>
  <div class="container">

    <!-- FORM INPUT -->
    <div class="card">
      <h3>üìù Input Data Penjualan</h3>
      <form id="formPenjualan">
        <label>No SP:</label>
        <select name="nosp" id="nosp">
          <option value="">-- Pilih No SP --</option>
          <option value="SP001" data-tbs="120" data-kg="5600">SP001</option>
          <option value="SP002" data-tbs="150" data-kg="7000">SP002</option>
        </select>

        <label>Data Produksi:</label>
        <input type="text" id="tbs" class="readonly" placeholder="Jumlah TBS" readonly>
        <input type="text" id="kg" class="readonly" placeholder="Jumlah KG" readonly>

        <label>Harga Jual (Rp/Kg):</label>
        <input type="number" id="harga" required>

        <label>Total Penjualan (Rp):</label>
        <input type="text" id="total" class="readonly" readonly>

        <label>Upload Bukti Penjualan:</label>
        <input type="file" name="bukti" accept="image/*">

        <button type="submit" class="btn-save">‚úÖ Simpan</button>
        <button type="reset" class="btn-clear">‚ùå Clear</button>
      </form>
    </div>

    <!-- FILTER & PENCARIAN -->
    <div class="card">
      <h3>üîç Filter & Pencarian</h3>
      <div class="filter-box">
        <input type="text" placeholder="Cari data...">
        <select>
          <option>Filter Tanggal</option>
        </select>
        <select>
          <option>Filter No SP</option>
        </select>
      </div>
    </div>

    <!-- EXPORT -->
    <div class="export-btns">
      <button class="btn-excel">‚¨á Export Excel</button>
      <button class="btn-pdf">‚¨á Export PDF</button>
    </div>

    <!-- SUMMARY BOX -->
    <div class="summary">
      <div class="box">
        <h2 id="totalKG">12,600</h2>
        <p>Total KG</p>
      </div>
      <div class="box">
        <h2 id="totalPenjualan">Rp 28,000,000</h2>
        <p>Total Penjualan</p>
      </div>
    </div>

    <!-- TABEL DATA -->
    <table id="dataTable">
      <thead>
        <tr>
          <th>No</th>
          <th>No SP</th>
          <th>TBS</th>
          <th>KG</th>
          <th>Harga Jual</th>
          <th>Total Penjualan</th>
          <th>Bukti</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td>SP001</td>
          <td>120</td>
          <td>5600</td>
          <td>Rp 2.500</td>
          <td>Rp 14.000.000</td>
          <td><a href="#">Lihat</a></td>
        </tr>
        <tr>
          <td>2</td>
          <td>SP002</td>
          <td>150</td>
          <td>7000</td>
          <td>Rp 2.000</td>
          <td>Rp 14.000.000</td>
          <td><a href="#">Lihat</a></td>
        </tr>
      </tbody>
    </table>

  </div>

  <script>
    const nosp = document.getElementById("nosp");
    const tbs = document.getElementById("tbs");
    const kg = document.getElementById("kg");
    const harga = document.getElementById("harga");
    const total = document.getElementById("total");

    nosp.addEventListener("change", function() {
      const selected = this.options[this.selectedIndex];
      tbs.value = selected.getAttribute("data-tbs") || "";
      kg.value = selected.getAttribute("data-kg") || "";
    });

    harga.addEventListener("input", function() {
      if (kg.value && harga.value) {
        total.value = "Rp " + (parseInt(kg.value) * parseInt(harga.value)).toLocaleString();
      }
    });

    // Hitung Total Penjualan & Total KG
    function updateSummary() {
      let rows = document.querySelectorAll("#dataTable tbody tr");
      let totalKG = 0;
      let totalPenjualan = 0;

      rows.forEach(row => {
        let kg = parseInt(row.cells[3].innerText) || 0;
        let penjualan = row.cells[5].innerText.replace(/[^\d]/g, "") || 0;

        totalKG += kg;
        totalPenjualan += parseInt(penjualan);
      });

      document.getElementById("totalKG").innerText = totalKG.toLocaleString();
      document.getElementById("totalPenjualan").innerText = "Rp " + totalPenjualan.toLocaleString();
    }

    updateSummary();
  </script>
</body>
</html>
